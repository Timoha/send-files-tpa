<div style="min-width: 250px;"ng-controller="WidgetCtrl">
  <form name="fileForm" novalidate ng-model="fileForm">
    
    <div class="block end-blocks file-upload dropper">
      <div class="dropee" title="Drop files here" ng-file-drop="onFileSelect($files)" ng-file-drag-over-class="dropping">Drop files here</div>
      <!-- Make sure drag and drop is only shown on good browsers -->
      <p class="owner-message top-p">
        {{settings.headlineText}}
      </p>
      <button disabled>{{settings.addButtonText}}</button>
      <input type="file" class= "upload" title={{settings.addButtonText}} ng-file-select="onFileSelect($files)" multiple name="sendFile"> <!-- make sure name is working properly when sending to backend. -->
      <p class="drag-drop-message" ng-file-drop-available="dropSupported=true" ng-show="dropSupported">
        Or just drop files here.
      </p>
      <p class="limitation-message bottom-p">
        <!-- 1GB = 1073741824 bytes -->
        You can upload up to {{uploadLimit / 1073741824}}GB of files.
      </p>
    </div>

  <!-- Note: Placeholder attribute is not supported in IE9 or below -->

    <div class="block files">
      <p class="file-statistics" ng-style="marginStyle">Total files added: {{totalFilesAdded}} <span class="space-left">Space left: {{totalGBLeft}} GB</span></p>
      <div class="tool-tip-container" ng-show="showNoFile">
          <span class="tool-tip">Please add a file</span>
      </div>
      <!-- Show uploading files here -->
      <!-- <div class="block too-large">
        <ul class="list-files">
          <li ng-show="tooLargeList.length > 0">The following files can't be added due to lack of storage space:</li>
          <li ng-repeat="file in tooLargeList">
            {{file.name}} - {{file.newSize}}
          </li>
        </ul>
      </div> -->
      <ul class="list-files">
        <li class="display-files" ng-repeat="file in fileList" ng-if="uploadedFiles[$index] !== 'aborted'">
          <span class="file-text" ng-style="fileStyle($index)" hover>
            <a class="retry-files" href="#" ng-click="start($index)">.</a>
            <span class="file-info">
              {{file.name}} - {{file.newSize}}
            </span>
            <a class="remove" href="#" ng-click="abort($index)">.</a>
            <span class="status-text progress-text" ng-if="progressIcons[$index]
            === undefined">
              {{100 - progress[$index]}}%
            </span>
            <span class="status-text" ng-if="progressIcons[$index] === false">
              &#10008;
            </span>
            <span class="status-text checkmark" ng-if="progressIcons[$index] === true">
              &#10004;
            </span>
          </span>
          <div style="clear: both;"></div>
          <div class="progress">
            <span style="width:{{progress[$index]}}%;"></span>
          </div>
        </li>
      </ul> 
    </div>

    <div class="block input-block">
      <input name="visitorName" class="visitorName" placeholder="{{settings.yourNameText}}" ng-model="visitorName" ng-change="updateVisitorName(visitorName)" ng-pattern="nameRegex" required>
      <div class="tool-tip-container" ng-show="showNoName">
          <span class="tool-tip">Please enter a name.</span>
      </div>
    </div>

    <div class="block input-block email-block">
      <input name="email" type="email" class="email" placeholder="{{settings.emailAddressText}}" required ng-model="email" ng-pattern="emailRegex" ng-change="updateEmail(email)">
      <div class="tool-tip-container" ng-show="showInvalidEmail">
          <span class="tool-tip">Please enter a valid email address</span>
      </div>
    </div>

    <div class="block user-message">
      <textarea name="message" placeholder={{settings.messageText}} required ng-model="message" class="message" ng-change="updateMessage(message)"></textarea>
       <div class="tool-tip-container-message">
          <span class="tool-tip-message" ng-show="showNoMessage">Please enter a message</span>
      </div>
    </div>

    <div class="block end-blocks submit">
        <button class="submit-button" type="submit" ng-disabled="submitNotReady()" ng-click="submit()" ng-style="submitButtonStyle()">
          <span ng-show="!(totalFilesAdded)">{{settings.submitButtonText}}</span>
          <span ng-show="totalFilesAdded &amp;&amp; !uploadFailed">{{fileUploadSubmitText}}</span>
        </button>
      <div class="submit-container" ng-mouseover="enableErrorMessage()" ng-mouseleave="disableErrorMessage()" ng-show="submitNotReady()"> 
        <!-- Invisible element that surrounds Submit Button - allows mouse events when button disabled -->
      </div>
    </div>
    <div class="failure-end end-blocks" ng-show="uploadFailed">
      <button type="button" ng-click="submit()">Retry</button>
      <button type="reset" ng-click="reset()" reset>Cancel</button>
    </div>
  </form>
</div>

